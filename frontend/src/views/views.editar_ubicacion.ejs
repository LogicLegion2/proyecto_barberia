<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Barber`s Brothers</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/global-style.css">
  <link rel="stylesheet" href="/css/style_principal.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Aleo:ital,wght@0,100..900;1,100..900&family=Quicksand:wght@300&display=swap"
    rel="stylesheet">
</head>

<body>
  <div class="container-fluid custom-bg-color text-white">
    <div class="row">
      <nav class="navbar navbar-dark">
        <div class="container-fluid d-flex flex-row-reverse">
          <a class="navbar-brand me-auto ms-auto fs-1 fw-bold" href="#">Editar Ubicación</a>
          <button class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="offcanvas offcanvas-start text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar"
            aria-labelledby="offcanvasDarkNavbarLabel">
            <div class="offcanvas-header menu-top">
              <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">Menu Cuenta</h5>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"
                aria-label="Close"></button>
            </div>
            <div class="offcanvas-body pt-2 pb-0 menu-top">
              <div class="d-grid gap-3">
                <li
                  class="nav-item border-bottom pb-2 border-opacity-75 border-secondary d-flex justify-content-between">
                  <a class="nav-link " href="pag_admin.html">Página Principal</a><i class="bi bi-chevron-right"></i>
                </li>
                <li
                  class="nav-item border-bottom pb-2 border-opacity-75 border-secondary d-flex justify-content-between">
                  <a class="nav-link " href="productos.html">Productos</a><i class="bi bi-chevron-right"></i>
                </li>
                <li
                  class="nav-item border-bottom pb-2 border-opacity-75 border-secondary d-flex justify-content-between">
                  <a class="nav-link " href="servicio.html">Servicios</a><i class="bi bi-chevron-right"></i>
                </li>
                <li
                  class="nav-item border-bottom pb-2 border-opacity-75 border-secondary d-flex justify-content-between">
                  <a class="nav-link " href="oferta.html">Ofertas</a><i class="bi bi-chevron-right"></i>
                </li>
                <li
                  class="nav-item border-bottom pb-2 border-opacity-75 border-secondary d-flex justify-content-between">
                  <a class="nav-link " href="visualizar_registro.html">Usuarios</a><i class="bi bi-chevron-right"></i>
                </li>
                <li
                  class="nav-item border-bottom pb-2 border-opacity-75 border-secondary d-flex justify-content-between">
                  <a class="nav-link " href="/ubicaciones/listar">Ubicaciones</a><i class="bi bi-chevron-right"></i>
                </li>
                <li
                  class="nav-item border-bottom pb-2 border-opacity-75 border-secondary d-flex justify-content-between">
                  <a class="nav-link " href="pregunta.html">Preguntas</a><i class="bi bi-chevron-right"></i>
                </li>
                <li
                  class="nav-item border-bottom pb-2 border-opacity-75 border-secondary d-flex justify-content-between">
                  <a class="nav-link " href="entrega_producto.html">Entregas</a><i class="bi bi-chevron-right"></i>
                </li>
                <li
                  class="nav-item border-bottom pb-2 border-opacity-75 border-secondary d-flex justify-content-between">
                  <a class="nav-link " href="prod_vendido.html">Productos Vendidos</a><i
                    class="bi bi-chevron-right"></i>
                </li>
                <li
                  class="nav-item border-bottom pb-2 border-opacity-75 border-secondary d-flex justify-content-between">
                  <a class="nav-link " href="reservas.html">Reservas</a><i class="bi bi-chevron-right"></i>
                </li>
                <li
                  class="nav-item border-bottom pb-2 border-opacity-75 border-secondary d-flex justify-content-between">
                  <a class="nav-link " href="perfil_admin.html">Mi cuenta</a><i class="bi bi-chevron-right"></i>
                </li>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
    <div class="col-11 container">
      <div class="justify-content-center pt-4 d-flex">
        <div class="col-6">
          <form id="editForm" method="POST" action="/ubicaciones/editar">
            <input type="hidden" id="ubicacion_id" name="id" value="<%= id %>">
            <input type="text" id="titulo" name="titulo" class="text-white mt-4 text-center border-0 form-control" placeholder="Ingrese el nuevo título" >
            <input type="text" id="ubicacion" name="ubicacion" class="text-white mt-4 text-center border-0 form-control" placeholder="Ingrese la nuevo ubicación" >
            <input type="text" id="descripcion" name="descripcion" class="text-white mt-4 text-center border-0 form-control" placeholder="Ingrese la nueva descripción" >
            <button type="submit"
              class="mt-5 form-container fw-bold btn fs-5 w-100 btn-form text-white btn-color">Editar</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
    integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');
        if (id) {
            try {
                const response = await fetch(`/ubicaciones/obtener/${id}`);
                const data = await response.json();
                document.getElementById('ubicacion_id').value = id;
                document.getElementById('titulo').value = data.titulo;
                document.getElementById('ubicacion').value = data.ubicacion;
                document.getElementById('descripcion').value = data.descripcion;

                // Establecer los valores en los placeholders
                document.getElementById('titulo').setAttribute('placeholder', data.titulo);
                document.getElementById('ubicacion').setAttribute('placeholder', data.ubicacion);
                document.getElementById('descripcion').setAttribute('placeholder', data.descripcion);
            } catch (error) {
                console.error('Error fetching location data:', error);
            }
        }

        // Mostrar alerta si la edición fue exitosa
        const success = params.get('success');
        const error = params.get('error');
        if (success === 'true') {
            Swal.fire({
                icon: 'success',
                title: "<h5 style='color:white; font-family: 'Aleo', serif;'>" + 'Ubicación editada exitosamente' + "</h5>",
                showConfirmButton: false,
                timer: 1500,
                customClass: {
                  popup: 'bg-alert',
                  content: 'text-alert'
              }
            });
        }
        if(error == 'true'){
          Swal.fire({
            icon: 'error',
            title: "<h5 style='color:white; font-family: 'Aleo', serif;'>" + 'Intentalo de nuevo más tarde' + "</h5>",
            showConfirmButton: false,
            timer: 1500,
            customClass: {
              popup: 'bg-alert',
          }
        });
        }
    });
  </script>
</body>

</html>