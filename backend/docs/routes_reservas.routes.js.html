<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: routes/reservas.routes.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: routes/reservas.routes.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { Router } from "express";
import { cancelarReserva, crearReserva, historialCita, historialReserva, listarReservas, listarReservasAdmin } from "../controllers/reservas.controllers.js";
import { verificarToken } from "../middlewares/oauth.js";
import { generarPDF, generarPDFBarbero } from "../libs/pdfKit.js";

/**
 * Estas son las rutas del backend de reservas para gestionar las operaciones relacionadas con las reservas
 * @type {object}
 */
const rutaReservaAdmin = Router();

rutaReservaAdmin.get("/admin", listarReservasAdmin);
rutaReservaAdmin.get("/listar/:id", listarReservas);
rutaReservaAdmin.get("/historial/:id", historialCita);
rutaReservaAdmin.get("/historial/", historialReserva);
rutaReservaAdmin.post("/crear", crearReserva);
rutaReservaAdmin.post("/cancelar", cancelarReserva);

rutaReservaAdmin.get("/pdf", (req, res) => {

 // Configuración de cabeceras de respuesta para el PDF generado
    const stream = res.writeHead(200, {
        "Content-Type": "application/pdf",
        "Content-Disposition": "attachment; filename = Reservas.pdf"
    })
// Genera y envía el PDF utilizando la función generarPDF
    generarPDF(
        (data) => stream.write(data), // Función de callback para escribir datos en el stream de respuesta
        () => stream.end()            // Función de callback para finalizar el stream de respuesta
);
});
// Ruta para generar PDF de reservas de un barbero específico
rutaReservaAdmin.get("/pdf/barbero/:id", (req, res) => {
    const id = req.params['id'];
    
    // Configura las cabeceras de respuesta para el PDF generado
    res.setHeader("Content-Type", "application/pdf");
    res.setHeader("Content-Disposition", "attachment; filename=Reservas.pdf");

    // Genera y envía el PDF utilizando la función generarPDFBarbero
    generarPDFBarbero(
        { id },                      // Parámetros para la generación del PDF (en este caso, el ID del barbero)
        (chunk) => res.write(chunk, 'binary'), // Función de callback para escribir datos en el stream de respuesta
        () => res.end()              // Función de callback para finalizar el stream de respuesta
    );
});

export default rutaReservaAdmin;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-ctr-barbero.html">ctr-barbero</a></li><li><a href="module-ctr-comentarios.html">ctr-comentarios</a></li><li><a href="module-ctr-favoritos.html">ctr-favoritos</a></li><li><a href="module-ctr-ofertas.html">ctr-ofertas</a></li><li><a href="module-ctr-payment.html">ctr-payment</a></li><li><a href="module-ctr-preguntas.html">ctr-preguntas</a></li><li><a href="module-ctr-productos.html">ctr-productos</a></li><li><a href="module-ctr-reservas.html">ctr-reservas</a></li><li><a href="module-ctr-servicios.html">ctr-servicios</a></li><li><a href="module-ctr-ubicaciones.html">ctr-ubicaciones</a></li><li><a href="module-ctr-usuarios.html">ctr-usuarios</a></li><li><a href="module-ctr-ventas.html">ctr-ventas</a></li><li><a href="module-libs-pdfkit.html">libs-pdfkit</a></li></ul><h3>Global</h3><ul><li><a href="global.html#error">error</a></li><li><a href="global.html#pool">pool</a></li><li><a href="global.html#router">router</a></li><li><a href="global.html#ruta">ruta</a></li><li><a href="global.html#rutaBarberos">rutaBarberos</a></li><li><a href="global.html#rutaComentarios">rutaComentarios</a></li><li><a href="global.html#rutaFavoritos">rutaFavoritos</a></li><li><a href="global.html#rutaOfertas">rutaOfertas</a></li><li><a href="global.html#rutaPreguntas">rutaPreguntas</a></li><li><a href="global.html#rutaProductos">rutaProductos</a></li><li><a href="global.html#rutaReservaAdmin">rutaReservaAdmin</a></li><li><a href="global.html#rutaServicios">rutaServicios</a></li><li><a href="global.html#rutaUbicaciones">rutaUbicaciones</a></li><li><a href="global.html#rutaUsuarios">rutaUsuarios</a></li><li><a href="global.html#rutaVentas">rutaVentas</a></li><li><a href="global.html#verificarToken">verificarToken</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Wed Jun 26 2024 18:55:50 GMT-0500 (hora estándar de Colombia)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
